# Index

有序的数据结构

## 类型

- 主键索引 唯一且不为null

- 普通索引 无限制

- 唯一索引 唯一 允许空

- 全文索引 只能在文本类型CHAR,VARCHAR,TEXT类型字段上创建全文索引

- 空间索引 MySQL在5.7之后的版本支持了空间索引，而且支持OpenGIS几何数据模型。MySQL在空间索引这方面遵循OpenGIS几何数据模型规则
- 前缀索引 在文本类型如CHAR,VARCHAR,TEXT类列上创建索引时，可以指定索引列的长度，但是数值类型不能指定

又可分为

- 单列索引

- 组合索引 

## 数据结构

### Hash

精确单个查询 



### B+ Tree

只有在叶子节点才会真正的存储数据 叶子结点维护双向有序链表 适合范围查找

#### 存储引擎实现

MyISAM 中,辅助索引和主键索引的结构是一样的，没有任何区别，叶子节点的数据存储的都是行记录的磁盘地址。只是主键索引的键值是唯一的，而辅助索引的键值可以重复。



每个InnoDB表都有一个聚簇索引 ，聚簇索引使用B+树构建，叶子节点存储的数据是整行记录。一般情况下，聚簇索引等同于主键索引，当一个表没有创建主键索引时，InnoDB会自动创建一个6 字节长整型的隐式字段ROWID字段来构建聚簇索引

根据在辅助索引树中获取的主键id，到主键索引树检索数据的过程称为**回表**查询。

## 索引优化

覆盖索引

select的列都是索引项

索引失效

不满足最左前缀匹配

范围索引未放到最后:联合索引里的范围列

使用select *

索引列上有计算

索引列上有函数

字符类型没加引号

字段允许为空情况下 使用对 null判断不走索引

like查询左边%

or对不同索引字段使用比单独select后union差



一页 16K









