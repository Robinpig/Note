## Introduction



MySQL主从同步
主库将数据变更记录到binlog中，从库定期请求读取主库的binlog；从库拿到binlog中，先写到relay log中，并由coordinator读取relay log并分发事务，最终由多个worker线程并行将数据变更应用从库中

主从延迟的概念
- 同一个事务，在从库执行完成的时间 和在主库执行完成的时间 之间的差值。
- 在从库上，可以通过show slave status命令查看seconds_behind_master『当前从库延迟了多少秒』
- 主从延迟，最直接的表现就是 主库记录binlog的速度 低于从库消费relay log的速度

主从延迟的来源
- 从库机器性能弱于主库，从库同步速度慢
  尽量选用相同规格的机器，对称部署
- 大事务
  主库上等事务执行完(比如10分钟)，才会写binlog再传送给备库；备库执行时，也需要耗费10分钟；此时主备延迟长达10分钟
- 从库压力大
  从库提供读能力，io压力大，导致根据relay log同步更改速度变慢
  一主多从，分散从库压力
- 主库从库索引不一致
  比如主库利用索引更改数据，备库回放时走全表扫描
  主库和从库使用的MySQL版本不同、参数配置不同，可能导致索引定义不一致





## Links

- [MySQL](/docs/CS/DB/MySQL/MySQL.md)
