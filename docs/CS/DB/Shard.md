## Introduction


分片是将大数据表分解为较小的表（称为分片）的过程，这些分片分布在多个数据库集群节点上。分片本质上可以被看作传统数据库中的分区表，是一种水平扩展手段。每个分片上包含原有总数据集的一个子集，从而可以将总负载分散在各个分区之上。

数据分片的方式一般有两种。

水平分片：在不同的数据库节点中存储同一表的不同行。
垂直分片：在不同的数据库节点中存储表不同的表列。


除分库分表外的解决方案

- 数据归档 冷热数据分离 分批次迁移历史数据 在历史数据的查询上做限制条件
- 读写分离

分库分表带来的以下问题和挑战：
- 重构适配系统  本身我们的业务系统不可能一开始开发上线的时候就会分库分表 进行分库分表我们业务服务项目代码需要从单一数据库表适配成多库多表，这是一次极其繁重的重构任务，还涉及到数据迁移、备份、扩容等操作问题，
- 事务问题 分库分表会涉及到分布式事务，所以在这一块需要解决分布式事务可能带来的不一致性
- 分页、排序、聚合函数问题  
- 全局主键避免重复  单表主键id自增能够保证id不重复，但是分库分表之后，多张表就不能保证主键id不重复了，这时候就要使用分布式id算法进行生成。
- 数据迁移、扩容问题  随着数据持续增加分表后还需要进行动态新增表时，这个时候就要考虑数据迁移以及扩容问题


分库分表方案中，首先我们要有两个算法。
- 一个分库字段和分库算法，即在进行数据查询、数据写入时，根据分库字段的值算出要
路由到哪个数据库实例上；
- 一个分表字段和分表算法，即在进行数据查询、数据写入时，根据分表字段的值算出要
路由到哪个表上。

SQL 解析




MyCat 服务端代理模式 对业务代码无侵入 有性能损耗 中心化 容易成为瓶颈 数据库适配性

ShardingJDBC 客户端代理模式 性能损耗小 通过jar扩展 适配性强 没有统一视图 运维成本高

[ShardingSphere](/docs/CS/DB/ShardingSphere.md) 类似MyCat 搭配




## Links

- [DataBases](/docs/CS/DB/DB.md)